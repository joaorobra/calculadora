<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Aportes constantes</title>
    <link rel="stylesheet" href="estilo-calc.css" />
  </head>
  <body>
    <main>
      <img class="icone-main" src="../icons/savings.png" alt="" />
      <h1>Aportes Constantes</h1>

      <input
        class="numbers"
        type="number"
        name="naportes"
        placeholder="quantidade de meses"
        id="inaportes"
        min="0"
      />

      <input
        class="numbers"
        type="number"
        name="aporte"
        id="iaporte"
        placeholder="valor do aporte mensal"
        min="0"
      />

      <input
        class="numbers"
        type="number"
        name="inicial"
        id="iinicial"
        placeholder="valor inicial"
        min="0"
      />

      <input
        class="numbers"
        type="number"
        name="taxames"
        id="itaxa"
        placeholder="taxa de retorno ao mês"
        min="0"
      />

      <button id="calcular">Calcular</button>

      <output name="montante-final" id="imonfinal"></output>

      <script>
        function montanteFinal(p, j, n) {
          j = j / 100; // A taxa de juros j é convertida de percentual para decimal
          return p * ((Math.pow(1 + j, n) - 1) / j); // Aplica a fórmula do valor futuro
        }

        var calcular = document.getElementById("calcular");
        var inaportes = document.getElementById("inaportes");
        var iaporte = document.getElementById("iaporte");
        var iinicial = document.getElementById("iinicial");
        var itaxa = document.getElementById("itaxa");
        var monfinal = document.getElementById("imonfinal");

        calcular.addEventListener("click", function () {
          var naportes = parseFloat(inaportes.value);
          var aporte = parseFloat(iaporte.value);
          var inicial = parseFloat(iinicial.value);
          var taxames = parseFloat(itaxa.value);

          var montante = montanteFinal(aporte, taxames, naportes, inicial); // passa o valor inicial como quarto argumento

          document.querySelector("output#imonfinal").textContent =
            Intl.NumberFormat("pt-BR", {
              style: "currency",
              currency: "BRL",
            }).format(montante);
        });
      </script>
    </main>
  </body>
</html>
